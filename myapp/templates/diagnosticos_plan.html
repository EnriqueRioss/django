{% extends 'layouts/base2.html' %}
{% load static %}

{% block content %}
<script src="{% static 'js/input.js' %}"></script>
<link rel="stylesheet" href= "{% static '/styles/stylesforms.css' %}">

<div class="form-container">
    <h1>Diagnósticos y Plan de Estudio</h1>
    <form method="post" id="diagnosticos-form">
        {% csrf_token %}
        
        <!-- Formulario principal -->
        <div class="form-group">
            <label>Signos Clínicos Relevantes</label>
            {{ form.signos_clinicos }}
        </div>
        
        <div class="form-group">
            <label>Enfermedad Actual</label>
            {{ form.enfermedad_actual }}
        </div>
        
        <!-- Formset de diagnósticos presuntivos -->
        <div class="form-group">
            <label>Diagnósticos Presuntivos</label>
            <div id="diagnosticos-container">
                {{ formset.management_form }}
                {% for form in formset %}
                <div class="diagnostico-item form-row">
                    {{ form.id }}
                    <div class="flex-grow-1">
                        {{ form.descripcion }}
                    </div>
                    <div class="ml-2">
                        {% if form.instance.pk %}
                            {{ form.DELETE }} <label>Eliminar</label>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            <button type="button" id="add-diagnostico" class="btn btn-secondary mt-2">
                <i class="fas fa-plus"></i> Añadir diagnóstico
            </button>
        </div>
        
        <div class="form-group">
            <label>Plan de Estudio</label>
            {{ form.plan_estudio }}
        </div>
        
        <div class="form-group">
            <label>Diagnóstico Confirmado</label>
            {{ form.diagnostico_confirmado }}
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Guardar</button>
        </div>
    </form>
</div>




{% endblock %}