{% extends 'layouts/base2.html' %}
{% load static %}

{% block content %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EXAMEN FÍSICO | IIG - LUZ</title>
    <link rel="stylesheet" href="{% static '/styles/stylesforms.css' %}">
</head>
<body>

<div class="form-container">

    <h1>Examen Físico</h1>
    <h4>
        <strong>Proposito: {{ proposito.proposito_id }}</strong> - {{ proposito.nombres }} {{ proposito.apellidos }}
    </h4>

    {% if editing %}
        <p class="editing-info"><em>Modo Edición: Actualizando Examen Físico.</em></p>
    {% endif %}
    <form method="post">
        {% csrf_token %}

        {% if form.non_field_errors %}
            <div class="alert alert-danger non-field-errors">
                {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}
        {# Removed your old errors block #}


        <div class="form-group-tres">
            <div class="third-width">
                <label for="{{ form.medida_abrazada.id_for_label }}">Medida Abrazada</label>
                {{ form.medida_abrazada }}
                {% if form.medida_abrazada.errors %}<div class="field-errors">{% for e in form.medida_abrazada.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.segmento_inferior.id_for_label }}">Segmento Inferior</label>
                {{ form.segmento_inferior }}
                {% if form.segmento_inferior.errors %}<div class="field-errors">{% for e in form.segmento_inferior.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.segmento_superior.id_for_label }}">Segmento Superior</label>
                {{ form.segmento_superior }}
                {% if form.segmento_superior.errors %}<div class="field-errors">{% for e in form.segmento_superior.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group-tres">
            <div class="third-width">
                <label for="{{ form.circunferencia_cefalica.id_for_label }}">Circunferencia Cefálica</label>
                {{ form.circunferencia_cefalica }}
                {% if form.circunferencia_cefalica.errors %}<div class="field-errors">{% for e in form.circunferencia_cefalica.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.talla.id_for_label }}">Talla</label>
                {{ form.talla }}
                {% if form.talla.errors %}<div class="field-errors">{% for e in form.talla.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.distancia_intermamilar.id_for_label }}">Distancia Intermamilar</label>
                {{ form.distancia_intermamilar }}
                {% if form.distancia_intermamilar.errors %}<div class="field-errors">{% for e in form.distancia_intermamilar.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group-tres">
            <div class="third-width">
                <label for="{{ form.distancia_interc_interna.id_for_label }}">Distancia Interc. Interna</label>
                {{ form.distancia_interc_interna }}
                {% if form.distancia_interc_interna.errors %}<div class="field-errors">{% for e in form.distancia_interc_interna.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.distancia_interpupilar.id_for_label }}">Distancia Interpupilar</label>
                {{ form.distancia_interpupilar }}
                {% if form.distancia_interpupilar.errors %}<div class="field-errors">{% for e in form.distancia_interpupilar.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.longitud_mano_derecha.id_for_label }}">Longitud Mano Derecha</label>
                {{ form.longitud_mano_derecha }}
                {% if form.longitud_mano_derecha.errors %}<div class="field-errors">{% for e in form.longitud_mano_derecha.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group-tres">
            <div class="third-width">
                <label for="{{ form.longitud_mano_izquierda.id_for_label }}">Longitud Mano Izquierda</label>
                {{ form.longitud_mano_izquierda }}
                {% if form.longitud_mano_izquierda.errors %}<div class="field-errors">{% for e in form.longitud_mano_izquierda.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.peso.id_for_label }}">Peso</label>
                {{ form.peso }}
                {% if form.peso.errors %}<div class="field-errors">{% for e in form.peso.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.ss_si.id_for_label }}">SS/SI</label>
                {{ form.ss_si }}
                {% if form.ss_si.errors %}<div class="field-errors">{% for e in form.ss_si.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group-tres">
            <div class="third-width">
                <label for="{{ form.distancia_interc_externa.id_for_label }}">Distancia Interc. Externa</label>
                {{ form.distancia_interc_externa }}
                {% if form.distancia_interc_externa.errors %}<div class="field-errors">{% for e in form.distancia_interc_externa.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.ct.id_for_label }}">CT</label>
                {{ form.ct }}
                {% if form.ct.errors %}<div class="field-errors">{% for e in form.ct.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="third-width">
                <label for="{{ form.pabellones_auriculares.id_for_label }}">Pabellones Auriculares</label>
                {{ form.pabellones_auriculares }}
                {% if form.pabellones_auriculares.errors %}<div class="field-errors">{% for e in form.pabellones_auriculares.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group-medio">
            <div class="half-width">
                <label for="{{ form.tension_arterial_sistolica.id_for_label }}">Tensión Arterial Sistólica</label>
                {{ form.tension_arterial_sistolica }}
                {% if form.tension_arterial_sistolica.errors %}<div class="field-errors">{% for e in form.tension_arterial_sistolica.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
            <div class="half-width">
                <label for="{{ form.tension_arterial_diastolica.id_for_label }}">Tensión Arterial Diastólica</label>
                {{ form.tension_arterial_diastolica }}
                {% if form.tension_arterial_diastolica.errors %}<div class="field-errors">{% for e in form.tension_arterial_diastolica.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.observaciones_cabeza.id_for_label }}">Observaciones Cabeza</label>
            {{ form.observaciones_cabeza }}
            {% if form.observaciones_cabeza.errors %}<div class="field-errors">{% for e in form.observaciones_cabeza.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_cuello.id_for_label }}">Observaciones Cuello</label>
            {{ form.observaciones_cuello }}
            {% if form.observaciones_cuello.errors %}<div class="field-errors">{% for e in form.observaciones_cuello.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_torax.id_for_label }}">Observaciones Tórax</label>
            {{ form.observaciones_torax }}
            {% if form.observaciones_torax.errors %}<div class="field-errors">{% for e in form.observaciones_torax.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_abdomen.id_for_label }}">Observaciones Abdomen</label>
            {{ form.observaciones_abdomen }}
            {% if form.observaciones_abdomen.errors %}<div class="field-errors">{% for e in form.observaciones_abdomen.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_genitales.id_for_label }}">Observaciones Genitales</label>
            {{ form.observaciones_genitales }}
            {% if form.observaciones_genitales.errors %}<div class="field-errors">{% for e in form.observaciones_genitales.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_espalda.id_for_label }}">Observaciones Espalda</label>
            {{ form.observaciones_espalda }}
            {% if form.observaciones_espalda.errors %}<div class="field-errors">{% for e in form.observaciones_espalda.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_miembros_superiores.id_for_label }}">Observaciones Miembros Superiores</label>
            {{ form.observaciones_miembros_superiores }}
            {% if form.observaciones_miembros_superiores.errors %}<div class="field-errors">{% for e in form.observaciones_miembros_superiores.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_miembros_inferiores.id_for_label }}">Observaciones Miembros Inferiores</label>
            {{ form.observaciones_miembros_inferiores }}
            {% if form.observaciones_miembros_inferiores.errors %}<div class="field-errors">{% for e in form.observaciones_miembros_inferiores.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_piel.id_for_label }}">Observaciones Piel</label>
            {{ form.observaciones_piel }}
            {% if form.observaciones_piel.errors %}<div class="field-errors">{% for e in form.observaciones_piel.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_osteomioarticular.id_for_label }}">Observaciones Osteomioarticular</label>
            {{ form.observaciones_osteomioarticular }}
            {% if form.observaciones_osteomioarticular.errors %}<div class="field-errors">{% for e in form.observaciones_osteomioarticular.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_neurologico.id_for_label }}">Observaciones Neurológico</label>
            {{ form.observaciones_neurologico }}
            {% if form.observaciones_neurologico.errors %}<div class="field-errors">{% for e in form.observaciones_neurologico.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>
        <div class="form-group">
            <label for="{{ form.observaciones_pliegues.id_for_label }}">Observaciones Pliegues</label>
            {{ form.observaciones_pliegues }}
            {% if form.observaciones_pliegues.errors %}<div class="field-errors">{% for e in form.observaciones_pliegues.errors %}<span>{{e}}</span>{% endfor %}</div>{% endif %}
        </div>

        <div class="form-actions">
            {% if pareja %}
                {# Flujo de pareja #}
                <button type="submit" name="save_and_finish" class="btn-primary">
                    <i class="fas fa-check-double"></i> Guardar y Continuar a Evaluación (Pareja)
                </button>
                {% if otro_proposito %}
                <button type="submit" name="save_and_go_to_other" class="btn-secondary">
                    <i class="fas fa-arrow-right"></i> Guardar e Ir a Examen de {{ otro_proposito.nombres }}
                </button>
                {% endif %}
            {% else %}
                {# Flujo de propósito individual #}
                <button type="submit" name="save_and_finish" class="btn-primary">Siguiente</button>
            {% endif %}
        </div>
    </form>
</div>

<script src="https://kit.fontawesome.com/8058dee255.js" crossorigin="anonymous"></script>
</body>
</html>
{% endblock %}